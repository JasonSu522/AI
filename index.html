<!DOCTYPE html>

<html lang="zh-TW">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>人生管理 | Life Manager Pro</title>
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone@7.23.2/babel.min.js"></script>
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }
body { background: #020617; color: #e2e8f0; font-family: ui-sans-serif, system-ui, -apple-system, sans-serif; min-height: 100vh; }
.app { display: flex; min-height: 100vh; }
nav.sidebar { position: fixed; left: 0; top: 0; bottom: 0; width: 64px; background: #0f172a; border-right: 1px solid #1e293b; display: flex; flex-direction: column; align-items: center; padding: 24px 0; z-index: 40; }
main.content { margin-left: 64px; padding: 32px; width: calc(100% - 64px); min-height: 100vh; overflow-y: auto; max-height: 100vh; }
.nav-btn { display: flex; flex-direction: column; align-items: center; justify-content: center; width: 100%; height: 56px; border: none; background: transparent; cursor: pointer; color: #64748b; transition: all 0.2s; border-right: 2px solid transparent; }
.nav-btn:hover { color: #cbd5e1; background: rgba(255,255,255,0.03); }
.nav-btn.active { color: #60a5fa; background: rgba(59,130,246,0.1); border-right-color: #3b82f6; }
.nav-btn .nav-label { font-size: 9px; margin-top: 4px; font-weight: 900; text-transform: uppercase; letter-spacing: 0.08em; }
.card { background: #0f172a; border: 1px solid #1e293b; border-radius: 24px; padding: 24px; }
.grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
.grid-asset { display: grid; grid-template-columns: 1.4fr 1fr; gap: 20px; }
@media (max-width: 800px) { .grid-2, .grid-asset { grid-template-columns: 1fr; } main.content { padding: 16px; } }
.section-title { font-size: 12px; font-weight: 900; font-style: italic; text-transform: uppercase; letter-spacing: 0.1em; color: #94a3b8; }
.label-xs { font-size: 10px; font-weight: 900; text-transform: uppercase; letter-spacing: 0.18em; color: #64748b; }
.btn-blue { background: #2563eb; color: white; border: none; border-radius: 12px; padding: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
.btn-blue:hover { background: #1d4ed8; }
.btn-green { background: #059669; color: white; border: none; border-radius: 12px; padding: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
.btn-ghost { background: rgba(59,130,246,0.15); color: #60a5fa; border: 1px solid rgba(59,130,246,0.3); border-radius: 10px; padding: 7px 14px; font-size: 10px; font-weight: 900; cursor: pointer; white-space: nowrap; }
.btn-ghost:hover { background: rgba(59,130,246,0.28); }
.btn-ghost:disabled { opacity: 0.5; cursor: not-allowed; }
.btn-ghost-green { background: rgba(16,185,129,0.1); color: #34d399; border: 1px solid rgba(16,185,129,0.25); border-radius: 10px; padding: 7px 14px; font-size: 10px; font-weight: 900; cursor: pointer; }
.btn-submit { width: 100%; padding: 15px; background: #2563eb; color: white; border: none; border-radius: 14px; font-size: 12px; font-weight: 900; text-transform: uppercase; letter-spacing: 0.25em; cursor: pointer; }
.btn-submit:hover { background: #1d4ed8; }
.btn-del { background: none; border: none; color: #334155; cursor: pointer; padding: 4px; display: flex; align-items: center; }
.btn-del:hover { color: #ef4444; }
.btn-edit { background: none; border: none; color: #334155; cursor: pointer; padding: 4px; display: flex; align-items: center; }
.btn-edit:hover { color: #60a5fa; }
.btn-text { background: none; border: none; font-size: 10px; font-weight: 900; text-transform: uppercase; cursor: pointer; padding: 0; }
.btn-text-blue { color: #60a5fa; }
.btn-text-red { color: #7f1d1d; }
.btn-text-red:hover { color: #ef4444; }
.form-group { display: flex; flex-direction: column; gap: 8px; }
.form-group label { font-size: 10px; font-weight: 900; text-transform: uppercase; letter-spacing: 0.18em; color: #64748b; }
.form-group input, .form-group textarea { background: #1e293b; border: 1px solid #334155; border-radius: 14px; padding: 13px 18px; font-size: 14px; color: #e2e8f0; outline: none; width: 100%; font-family: inherit; }
.form-group input[type="date"] { color-scheme: dark; }
.form-group input:focus, .form-group textarea:focus { border-color: #3b82f6; }
.form-group textarea { height: 110px; resize: vertical; }
.modal-overlay { position: fixed; inset: 0; z-index: 200; display: flex; align-items: center; justify-content: center; padding: 16px; }
.modal-bg { position: absolute; inset: 0; background: rgba(0,0,0,0.88); backdrop-filter: blur(5px); }
.modal-box { position: relative; background: #0f172a; border: 1px solid #1e293b; width: 100%; max-width: 430px; border-radius: 36px; padding: 38px; box-shadow: 0 30px 60px rgba(0,0,0,0.7); z-index: 1; max-height: 90vh; overflow-y: auto; }
.modal-title { font-size: 19px; font-weight: 900; font-style: italic; text-transform: uppercase; letter-spacing: -0.05em; color: white; margin-bottom: 28px; }
.modal-form { display: flex; flex-direction: column; gap: 18px; }
.close-btn { position: absolute; top: 18px; right: 18px; background: #1e293b; border: none; color: #64748b; cursor: pointer; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
.close-btn:hover { color: white; }
.prog-bar { height: 5px; background: #1e293b; border-radius: 9999px; overflow: hidden; margin-top: 4px; }
.prog-fill { height: 100%; background: #3b82f6; border-radius: 9999px; transition: width 0.4s; }
.prog-input { width: 46px; text-align: center; font-size: 10px; font-weight: 900; color: #60a5fa; padding: 4px; background: #020617; border: 1px solid #334155; border-radius: 8px; font-family: inherit; }
.asset-item { padding: 13px 15px; background: rgba(30,41,59,0.25); border: 1px solid #1e293b; border-radius: 14px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 9px; }
.note-card { background: rgba(30,41,59,0.2); border: 1px solid #1e293b; border-radius: 14px; overflow: hidden; margin-bottom: 9px; }
.note-header { width: 100%; padding: 13px 15px; display: flex; justify-content: space-between; align-items: center; background: none; border: none; color: #e2e8f0; cursor: pointer; font-size: 12px; font-weight: 900; font-style: italic; text-align: left; font-family: inherit; }
.note-body { padding: 16px; border-top: 1px solid rgba(30,41,59,0.6); background: rgba(2,6,23,0.4); font-size: 11px; color: #94a3b8; line-height: 1.65; }
.drag-item { padding: 13px 15px; background: rgba(30,41,59,0.2); border: 1px solid #1e293b; border-radius: 14px; display: flex; align-items: center; gap: 12px; margin-bottom: 9px; cursor: default; transition: opacity 0.2s; }
.drag-item.drag-over { opacity: 0.3; border-color: #3b82f6; }
.travel-card { padding: 18px; background: rgba(30,41,59,0.2); border: 1px solid #1e293b; border-radius: 20px; display: flex; justify-content: space-between; align-items: center; }
.travel-icon { padding: 10px; background: rgba(16,185,129,0.1); border-radius: 14px; color: #10b981; display: flex; }
.voice-btn { margin-top: auto; margin-bottom: 14px; width: 42px; height: 42px; border-radius: 50%; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; background: #1e293b; color: #94a3b8; transition: all 0.2s; }
.voice-btn:hover { color: white; }
.voice-btn.listening { background: #ef4444; color: white; animation: pulse 1.5s infinite; }
.ai-panel { background: linear-gradient(135deg, rgba(23,37,84,0.5), #0f172a); border: 1px solid rgba(59,130,246,0.3); border-radius: 24px; padding: 22px; }
.ai-panel-green { background: #0f172a; border: 1px solid rgba(16,185,129,0.3); border-radius: 20px; padding: 20px; }
.total-card { background: #0f172a; border: 1px solid #1e293b; border-radius: 32px; padding: 32px; text-align: center; }
::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-thumb { background: #1e293b; border-radius: 10px; }
@keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.55} }
.empty-msg { color: #475569; font-size: 12px; font-style: italic; text-align: center; padding: 20px 0; }
</style>
</head>
<body>
<div id="root">
  <div style="min-height:100vh;background:#020617;display:flex;align-items:center;justify-content:center;color:#3b82f6;font-size:14px;font-weight:900;letter-spacing:0.2em;">
    LOADING...
  </div>
</div>

<script>
// ── Inline SVG Icons ──
const ICONS = {
  Dashboard:`<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="7" height="9" x="3" y="3" rx="1"/><rect width="7" height="5" x="14" y="3" rx="1"/><rect width="7" height="9" x="14" y="12" rx="1"/><rect width="7" height="5" x="3" y="16" rx="1"/></svg>`,
  Calendar:`<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="4" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>`,
  Heart:`<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>`,
  PieChart:`<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.21 15.89A10 10 0 1 1 8 2.83"/><path d="M22 12A10 10 0 0 0 12 2v10z"/></svg>`,
  Book:`<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>`,
  Map:`<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21"/><line x1="9" y1="3" x2="9" y2="18"/><line x1="15" y1="6" x2="15" y2="21"/></svg>`,
  Brain:`<svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96-.46 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"/><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96-.46 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"/></svg>`,
  Plus:`<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>`,
  Trash:`<svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>`,
  Edit:`<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>`,
  Mic:`<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" y1="19" x2="12" y2="22"/></svg>`,
  Sparkles:`<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/></svg>`,
  Activity:`<svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>`,
  Info:`<svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>`,
  ChevronDown:`<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>`,
  ChevronUp:`<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15"/></svg>`,
  MapPin:`<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>`,
  Grip:`<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="12" r="1"/><circle cx="9" cy="5" r="1"/><circle cx="9" cy="19" r="1"/><circle cx="15" cy="12" r="1"/><circle cx="15" cy="5" r="1"/><circle cx="15" cy="19" r="1"/></svg>`,
  X:`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>`,
};
</script>

<script type="text/babel">
const { useState, useEffect, useMemo } = React;

const GEMINI_KEY = "AIzaSyAky6gF4ekVOuL0JiCr8ayBpD83wrLqe28";

// ── Helpers ──
function genId() { return '_' + Math.random().toString(36).slice(2) + Date.now().toString(36); }
function loadLocal() { try { return JSON.parse(localStorage.getItem('lm2_data') || '{}'); } catch { return {}; } }
function saveLocal(d) { try { localStorage.setItem('lm2_data', JSON.stringify(d)); } catch {} }

// ── Icon component ──
function Ico({ name, size }) {
  const svg = window.ICONS[name] || '';
  const sized = svg.replace(/width="\d+"/, `width="${size||18}"`).replace(/height="\d+"/, `height="${size||18}"`);
  return <span dangerouslySetInnerHTML={{__html: sized}} style={{display:'inline-flex',alignItems:'center'}}/>;
}

// ── RadarChart ──
function RadarChart({ data }) {
  const keys = ["wealth","health","growth","discipline","experience"];
  const labels = ["財務","健康","成長","自律","體驗"];
  const C=100, R=66;
  const coord=(i,v)=>{
    const a=Math.PI*2*i/5-Math.PI/2, r=R*v/100;
    return [C+r*Math.cos(a), C+r*Math.sin(a)];
  };
  const pts = keys.map((k,i)=>coord(i,data[k]||50).join(',')).join(' ');
  return (
    <svg viewBox="0 0 200 200" style={{width:'100%',maxWidth:210,display:'block',margin:'0 auto'}}>
      {[20,40,60,80,100].map((v,i)=>(
        <polygon key={i} points={keys.map((_,j)=>coord(j,v).join(',')).join(' ')} fill="none" stroke="#1e293b" strokeWidth="0.7"/>
      ))}
      {keys.map((_,i)=>{ const [x,y]=coord(i,100); return <line key={i} x1={C} y1={C} x2={x} y2={y} stroke="#1e293b" strokeWidth="0.7"/>; })}
      <polygon points={pts} fill="rgba(59,130,246,0.2)" stroke="#3b82f6" strokeWidth="2" strokeLinejoin="round"/>
      {keys.map((k,i)=>{ const [x,y]=coord(i,data[k]||50); return <circle key={i} cx={x} cy={y} r="3.5" fill="#3b82f6"/>; })}
      {labels.map((l,i)=>{ const [x,y]=coord(i,120); return <text key={i} x={x} y={y} fill="#64748b" fontSize="10" fontWeight="bold" textAnchor="middle" dominantBaseline="middle">{l}</text>; })}
    </svg>
  );
}

// ── PieChart ──
function PieChart({ data }) {
  const colors=['#3b82f6','#10b981','#f59e0b','#ef4444','#8b5cf6'];
  const total=data.reduce((a,b)=>a+(Number(b.amount)||0),0);
  if (!total) return <p className="empty-msg">暫無資產數據</p>;
  let cum=0;
  const c=p=>[Math.cos(2*Math.PI*p),Math.sin(2*Math.PI*p)];
  return (
    <div style={{width:'100%',maxWidth:240,margin:'0 auto'}}>
      <svg viewBox="-1.15 -1.15 2.3 2.3" style={{transform:'rotate(-90deg)',width:'100%',height:'auto',display:'block'}}>
        {data.map((item,i)=>{
          const pct=Number(item.amount)/total; if(pct<=0) return null;
          const sp=cum,[sx,sy]=c(sp); cum+=pct;
          const [ex,ey]=c(cum),[mx,my]=c(sp+pct/2);
          const d=`M${sx} ${sy} A1 1 0 ${pct>.5?1:0} 1 ${ex} ${ey} L0 0`;
          return (
            <g key={i}>
              <path d={d} fill={colors[i%colors.length]} stroke="#020617" strokeWidth="0.025"/>
              {pct>.07&&<text x={mx*.7} y={my*.7} fill="white" fontSize="0.13" fontWeight="bold" textAnchor="middle" dominantBaseline="middle" transform={`rotate(90,${mx*.7},${my*.7})`}>{item.name} {Math.round(pct*100)}%</text>}
            </g>
          );
        })}
      </svg>
      <div style={{display:'flex',flexWrap:'wrap',gap:8,justifyContent:'center',marginTop:14}}>
        {data.map((item,i)=>(
          <span key={i} style={{fontSize:10,fontWeight:700,color:colors[i%colors.length],display:'flex',alignItems:'center',gap:4}}>
            <span style={{width:8,height:8,borderRadius:'50%',background:colors[i%colors.length],display:'inline-block'}}/>
            {item.name}: ${Number(item.amount).toLocaleString()}
          </span>
        ))}
      </div>
    </div>
  );
}

// ── HealthChart ──
function HealthChart({ data }) {
  if (!data||data.length<2) return <p className="empty-msg">請新增至少兩筆資料以顯示趨勢圖</p>;
  const W=380,H=150,P=22;
  const keys=['weight','fat','muscle'],colors=['#3b82f6','#ef4444','#10b981'],lbls=['體重','體脂','肌肉'];
  const pts=key=>{
    const vals=data.map(d=>parseFloat(d[key])||0),min=Math.min(...vals),max=Math.max(...vals),range=max===min?1:max-min;
    return data.map((d,i)=>({x:P+(i/(data.length-1))*(W-2*P),y:(H-P)-((parseFloat(d[key])||0)-min)/range*(H-2*P)}));
  };
  return (
    <div style={{background:'rgba(2,6,23,0.4)',padding:14,borderRadius:14,border:'1px solid #1e293b'}}>
      <svg viewBox={`0 0 ${W} ${H}`} style={{width:'100%',height:130,overflow:'visible'}}>
        {keys.map((k,i)=>{
          const p=pts(k);
          return <g key={k}>
            <polyline fill="none" stroke={colors[i]} strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round" points={p.map(pt=>`${pt.x},${pt.y}`).join(' ')}/>
            {p.map((pt,j)=><circle key={j} cx={pt.x} cy={pt.y} r="4" fill={colors[i]} stroke="#020617" strokeWidth="1.5"/>)}
          </g>;
        })}
      </svg>
      <div style={{display:'flex',gap:16,justifyContent:'center',marginTop:8}}>
        {lbls.map((l,i)=><span key={l} style={{fontSize:10,color:colors[i],fontWeight:900,display:'flex',alignItems:'center',gap:4}}>
          <span style={{width:14,height:3,background:colors[i],borderRadius:2,display:'inline-block'}}/>{l}
        </span>)}
      </div>
    </div>
  );
}

// ── Modal ──
function Modal({ modal, onClose, onSubmit }) {
  if (!modal.show) return null;
  return (
    <div className="modal-overlay">
      <div className="modal-bg" onClick={onClose}/>
      <div className="modal-box">
        <button className="close-btn" onClick={onClose}><Ico name="X"/></button>
        <div className="modal-title">{modal.title}</div>
        <form className="modal-form" onSubmit={onSubmit}>
          {(modal.fields||[]).map(f=>(
            <div className="form-group" key={f.name}>
              <label>{f.label}</label>
              {f.type==='textarea'
                ? <textarea name={f.name} defaultValue={modal.initialData?.[f.name]||''} required/>
                : <input name={f.name} type={f.type} step="any" defaultValue={modal.initialData?.[f.name]||''} required/>
              }
            </div>
          ))}
          <button type="submit" className="btn-submit">確認送出</button>
        </form>
      </div>
    </div>
  );
}

// ── SortableList ──
function SortableList({ title, items, col, onSort, onAdd, onDelete, onUpdateProgress }) {
  const [dragIdx, setDragIdx] = useState(null);
  const [overIdx, setOverIdx] = useState(null);
  return (
    <div className="card">
      <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:18}}>
        <span className="section-title">{title}</span>
        <button className="btn-blue" onClick={onAdd}><Ico name="Plus"/></button>
      </div>
      {items.length===0&&<p className="empty-msg">尚無項目，點擊 + 新增</p>}
      {items.map((item,idx)=>(
        <div key={item.id}
          className={`drag-item${overIdx===idx?' drag-over':''}`}
          draggable
          onDragStart={()=>setDragIdx(idx)}
          onDragEnter={()=>setOverIdx(idx)}
          onDragOver={e=>e.preventDefault()}
          onDrop={()=>{ if(dragIdx!==null&&dragIdx!==idx) onSort(col,items,dragIdx,idx); setDragIdx(null);setOverIdx(null); }}
          onDragEnd={()=>{ setDragIdx(null);setOverIdx(null); }}>
          <span style={{color:'#334155',flexShrink:0,cursor:'grab'}}><Ico name="Grip"/></span>
          <div style={{flex:1}}>
            <p style={{fontSize:12,fontWeight:900,fontStyle:'italic',color:'#e2e8f0'}}>{item.title}</p>
          </div>
          {onUpdateProgress&&(
            <input type="number" min="0" max="100" defaultValue={item.progress||0} className="prog-input"
              onBlur={e=>onUpdateProgress(item.id,e.target.value)}/>
          )}
          <button className="btn-del" onClick={()=>onDelete(item.id)}><Ico name="Trash"/></button>
        </div>
      ))}
    </div>
  );
}

// ── App ──
function App() {
  const [tab, setTab] = useState('dashboard');
  const [modal, setModal] = useState({show:false});
  const [expandedNote, setExpandedNote] = useState(null);
  const [emergencyFund, setEmergencyFund] = useState(0);
  const [plans, setPlans] = useState({yearly:[],daily:[]});
  const [healthLogs, setHealthLogs] = useState([]);
  const [assets, setAssets] = useState([]);
  const [notes, setNotes] = useState({life:[],book:[],trading:[],web:[]});
  const [travel, setTravel] = useState([]);
  const [aiSummary, setAiSummary] = useState('');
  const [aiLoading, setAiLoading] = useState(false);
  const [radarData, setRadarData] = useState({wealth:50,health:50,growth:50,discipline:50,experience:50});
  const [assetAdvice, setAssetAdvice] = useState('');
  const [listening, setListening] = useState(false);

  // ── 初始化 ──
  useEffect(()=>{
    const s = loadLocal();
    if (!s.assets||s.assets.length===0) {
      s.assets=[
        {id:genId(),name:"台股",amount:2544261,category:"台股",createdAt:Date.now()},
        {id:genId(),name:"美股",amount:829175,category:"美股",createdAt:Date.now()},
        {id:genId(),name:"台新外幣(活)-USD",amount:4257,category:"美股",createdAt:Date.now()},
        {id:genId(),name:"台新外幣(活)-JPY",amount:6006,category:"現金",createdAt:Date.now()},
        {id:genId(),name:"台新外幣(定)-USD",amount:75473,category:"美股",createdAt:Date.now()},
        {id:genId(),name:"合庫(活存)",amount:1357878,category:"現金",createdAt:Date.now()},
        {id:genId(),name:"台新(活存)",amount:57170,category:"現金",createdAt:Date.now()},
        {id:genId(),name:"彰銀(活存)",amount:457003,category:"現金",createdAt:Date.now()},
        {id:genId(),name:"兆豐(備用金)",amount:43314,category:"現金",createdAt:Date.now()},
        {id:genId(),name:"黃金(2.2盎司)",amount:357357,category:"黃金",createdAt:Date.now()},
        {id:genId(),name:"台幣現金",amount:20000,category:"現金",createdAt:Date.now()},
        {id:genId(),name:"借志",amount:300000,category:"借款",createdAt:Date.now()},
      ];
      saveLocal(s);
    }
    setAssets(s.assets||[]);
    setPlans({yearly:s.plans_yearly||[],daily:s.plans_daily||[]});
    setHealthLogs(s.health_logs||[]);
    setNotes({life:s.notes_life||[],book:s.notes_book||[],trading:s.notes_trading||[],web:s.notes_web||[]});
    setTravel(s.travel||[]);
    setEmergencyFund(s.emergencyFund||0);
  },[]);

  // ── 儲存 ──
  const save=(key,val)=>{ const s=loadLocal(); s[key]=val; saveLocal(s); };

  // ── CRUD ──
  const addItem=(col,data)=>{
    const item={id:genId(),...data,createdAt:Date.now(),order:Date.now()};
    if(col==='assets'){const n=[...assets,item];setAssets(n);save('assets',n);}
    else if(col==='plans_yearly'){const n=[...plans.yearly,item];setPlans(p=>({...p,yearly:n}));save('plans_yearly',n);}
    else if(col==='plans_daily'){const n=[...plans.daily,item];setPlans(p=>({...p,daily:n}));save('plans_daily',n);}
    else if(col==='health_logs'){const n=[...healthLogs,item];setHealthLogs(n);save('health_logs',n);}
    else if(col==='travel'){const n=[...travel,item];setTravel(n);save('travel',n);}
    else if(col.startsWith('notes_')){const k=col.replace('notes_','');const n=[...(notes[k]||[]),item];setNotes(p=>({...p,[k]:n}));save(col,n);}
  };
  const updateItem=(col,id,data)=>{
    const upd=arr=>arr.map(i=>i.id===id?{...i,...data}:i);
    if(col==='assets'){const n=upd(assets);setAssets(n);save('assets',n);}
    else if(col==='plans_yearly'){const n=upd(plans.yearly);setPlans(p=>({...p,yearly:n}));save('plans_yearly',n);}
    else if(col==='plans_daily'){const n=upd(plans.daily);setPlans(p=>({...p,daily:n}));save('plans_daily',n);}
    else if(col.startsWith('notes_')){const k=col.replace('notes_','');const n=upd(notes[k]||[]);setNotes(p=>({...p,[k]:n}));save(col,n);}
  };
  const deleteItem=(col,id)=>{
    const del=arr=>arr.filter(i=>i.id!==id);
    if(col==='assets'){const n=del(assets);setAssets(n);save('assets',n);}
    else if(col==='plans_yearly'){const n=del(plans.yearly);setPlans(p=>({...p,yearly:n}));save('plans_yearly',n);}
    else if(col==='plans_daily'){const n=del(plans.daily);setPlans(p=>({...p,daily:n}));save('plans_daily',n);}
    else if(col==='health_logs'){const n=del(healthLogs);setHealthLogs(n);save('health_logs',n);}
    else if(col==='travel'){const n=del(travel);setTravel(n);save('travel',n);}
    else if(col.startsWith('notes_')){const k=col.replace('notes_','');const n=del(notes[k]||[]);setNotes(p=>({...p,[k]:n}));save(col,n);}
  };
  const onDragEnd=(col,items,from,to)=>{
    const arr=[...items];const[el]=arr.splice(from,1);arr.splice(to,0,el);
    arr.forEach((x,i)=>x.order=i);
    if(col==='plans_yearly'){setPlans(p=>({...p,yearly:arr}));save('plans_yearly',arr);}
    else{setPlans(p=>({...p,daily:arr}));save('plans_daily',arr);}
  };

  // ── Modal ──
  const openModal=cfg=>setModal({show:true,initialData:{},...cfg});
  const handleSubmit=e=>{
    e.preventDefault();
    const data=Object.fromEntries(new FormData(e.target).entries());
    if(modal.col==='emergency_fund'){
      const v=Number(data.value);setEmergencyFund(v);
      const s=loadLocal();s.emergencyFund=v;saveLocal(s);
    } else if(modal.type==='edit'){updateItem(modal.col,modal.id,data);}
    else{addItem(modal.col,data);}
    setModal({show:false});
  };

  // ── AI ──
  const callAI=async(prompt,json=false)=>{
    const url=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${GEMINI_KEY}`;
    const body={contents:[{parts:[{text:prompt}]}],...(json&&{generationConfig:{responseMimeType:"application/json"}})};
    const r=await fetch(url,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(body)});
    const d=await r.json();
    return d.candidates?.[0]?.content?.parts?.[0]?.text||'';
  };

  const categorized=useMemo(()=>{
    const c={"台股":0,"美股":0,"現金":0,"黃金":0,"借款":0};
    assets.forEach(a=>{const amt=Number(a.amount)||0;const cat=a.category||"現金";c[cat]=(c[cat]||0)+amt;});
    return Object.entries(c).map(([name,amount])=>({name,amount}));
  },[assets]);
  const total=useMemo(()=>categorized.reduce((a,b)=>a+b.amount,0),[categorized]);

  const generateAI=async()=>{
    if(aiLoading)return; setAiLoading(true);
    try{
      const ctx=`資產總額：${total.toLocaleString()}元，配置：${JSON.stringify(categorized)}`;
      const[r1,r2]=await Promise.all([
        callAI(`分析人生數據，針對財務、健康、自我成長、執行力、生活體驗五個維度各評 0-100 分，只回傳 JSON 格式：{"wealth":N,"health":N,"growth":N,"discipline":N,"experience":N}。資料：${ctx}`,true),
        callAI(`根據資料：${ctx}，用繁體中文約 150 字給出人生成長與理財建議。`)
      ]);
      try{if(r1)setRadarData(JSON.parse(r1));}catch{}
      if(r2)setAiSummary(r2);
    }catch{setAiSummary('AI 暫時無法使用，請確認網路連線後再試。');}
    setAiLoading(false);
  };

  const getAssetAI=async()=>{
    if(aiLoading)return; setAiLoading(true);
    try{const r=await callAI(`分析資產配置：${JSON.stringify(categorized)}，用繁體中文約 100 字給出具體優化建議。`);setAssetAdvice(r);}
    catch{setAssetAdvice('AI 分析暫時無法使用。');}
    setAiLoading(false);
  };

  const handleVoice=()=>{
    const SR=window.SpeechRecognition||window.webkitSpeechRecognition;
    if(!SR){alert('請使用 Chrome 瀏覽器以支援語音輸入');return;}
    const rec=new SR();rec.lang='zh-TW';rec.start();setListening(true);
    rec.onresult=async e=>{
      const t=e.results[0][0].transcript;setListening(false);
      try{const r=await callAI(`解析語句歸類為 health_logs（體重/體脂/肌肉）或 health_exercise（運動），語句：「${t}」，只回傳JSON：{"type":"health_logs","data":{欄位}}`,true);
        const p=JSON.parse(r);addItem(p.type,p.data);}catch{}
    };
    rec.onerror=()=>setListening(false);
  };

  const TABS=[
    {id:'dashboard',icon:'Dashboard',label:'總覽'},
    {id:'plans',icon:'Calendar',label:'計畫'},
    {id:'health',icon:'Heart',label:'健康'},
    {id:'assets',icon:'PieChart',label:'資產'},
    {id:'notes',icon:'Book',label:'筆記'},
    {id:'travel',icon:'Map',label:'旅遊'},
  ];

  return (
    <div className="app">
      {/* ── Sidebar ── */}
      <nav className="sidebar">
        <div style={{marginBottom:26,color:'#3b82f6'}}><Ico name="Brain" size={22}/></div>
        {TABS.map(t=>(
          <button key={t.id} className={`nav-btn${tab===t.id?' active':''}`} onClick={()=>setTab(t.id)}>
            <Ico name={t.icon} size={18}/>
            <span className="nav-label">{t.label}</span>
          </button>
        ))}
        <button className={`voice-btn${listening?' listening':''}`} onClick={handleVoice} title="語音輸入">
          <Ico name="Mic" size={18}/>
        </button>
      </nav>

      {/* ── Main ── */}
      <main className="content">
        <header style={{marginBottom:28}}>
          <h1 style={{fontSize:22,fontWeight:900,color:'white',fontStyle:'italic',textTransform:'uppercase',letterSpacing:'-0.04em'}}>人生管理</h1>
          <p className="label-xs" style={{marginTop:4}}>Efficiency & Vision</p>
        </header>

        {/* Dashboard */}
        {tab==='dashboard'&&(
          <div style={{display:'flex',flexDirection:'column',gap:20}}>
            <div className="grid-2">
              <div className="card" style={{display:'flex',flexDirection:'column',alignItems:'center',gap:14}}>
                <p style={{fontSize:10,fontWeight:900,color:'#60a5fa',textTransform:'uppercase',letterSpacing:'0.15em',display:'flex',alignItems:'center',gap:6,fontStyle:'italic'}}>
                  <Ico name="Activity" size={12}/> 人生雷達圖
                </p>
                <RadarChart data={radarData}/>
              </div>
              <div className="ai-panel" style={{display:'flex',flexDirection:'column',gap:14}}>
                <div style={{display:'flex',justifyContent:'space-between',alignItems:'center'}}>
                  <span style={{fontSize:11,fontWeight:900,color:'#60a5fa',textTransform:'uppercase',letterSpacing:'0.1em',fontStyle:'italic',display:'flex',alignItems:'center',gap:6}}>
                    <Ico name="Sparkles" size={13}/> AI 生命分析
                  </span>
                  <button className="btn-ghost" onClick={generateAI} disabled={aiLoading}>{aiLoading?'運算中...':'重新產生'}</button>
                </div>
                <p style={{fontSize:12,color:'#cbd5e1',lineHeight:1.7,whiteSpace:'pre-wrap',flex:1,minHeight:70}}>
                  {aiSummary||'點擊「重新產生」取得 AI 專屬分析與雷達評分建議...'}
                </p>
              </div>
            </div>

            <div className="card">
              <p className="section-title" style={{marginBottom:16,display:'flex',alignItems:'center',gap:6}}>
                <Ico name="Calendar" size={13}/> 年度目標進度
              </p>
              {plans.yearly.length===0&&<p className="empty-msg">尚無年度計畫，前往「計畫」頁新增</p>}
              {plans.yearly.slice(0,5).map(p=>(
                <div key={p.id} style={{marginBottom:14}}>
                  <div style={{display:'flex',justifyContent:'space-between',fontSize:11,fontWeight:700,fontStyle:'italic',marginBottom:5}}>
                    <span>{p.title}</span><span style={{color:'#60a5fa'}}>{p.progress||0}%</span>
                  </div>
                  <div className="prog-bar"><div className="prog-fill" style={{width:`${p.progress||0}%`}}/></div>
                </div>
              ))}
            </div>

            <div className="total-card">
              <p className="label-xs">總資產市值（淨值）</p>
              <div style={{fontSize:36,fontWeight:900,color:'white',fontStyle:'italic',margin:'10px 0 24px'}}>${total.toLocaleString()}</div>
              <PieChart data={categorized}/>
              <div style={{marginTop:26,paddingTop:22,borderTop:'1px solid #1e293b',display:'flex',justifyContent:'space-between',alignItems:'center'}}>
                <div>
                  <p className="label-xs">緊急預備金</p>
                  <p style={{fontSize:22,fontWeight:900,color:'#60a5fa',fontStyle:'italic',marginTop:4}}>${Number(emergencyFund).toLocaleString()}</p>
                </div>
                <button className="btn-ghost" onClick={()=>openModal({type:'edit',title:'修改緊急預備金',col:'emergency_fund',fields:[{name:'value',label:'金額',type:'number'}],initialData:{value:emergencyFund}})}>修改金額</button>
              </div>
            </div>
          </div>
        )}

        {/* Plans */}
        {tab==='plans'&&(
          <div style={{display:'flex',flexDirection:'column',gap:20}}>
            <SortableList title="年度目標計畫（可拖拽排序）" items={plans.yearly} col="plans_yearly" onSort={onDragEnd}
              onAdd={()=>openModal({type:'add',title:'新增年度計畫',col:'plans_yearly',fields:[{name:'title',label:'目標名稱',type:'text'},{name:'progress',label:'目前進度 (%)',type:'number'}]})}
              onDelete={id=>deleteItem('plans_yearly',id)}
              onUpdateProgress={(id,v)=>updateItem('plans_yearly',id,{progress:Math.min(100,Math.max(0,parseInt(v)||0))})}/>
            <SortableList title="每日任務管理（可拖拽排序）" items={plans.daily} col="plans_daily" onSort={onDragEnd}
              onAdd={()=>openModal({type:'add',title:'新增每日任務',col:'plans_daily',fields:[{name:'title',label:'任務內容',type:'text'}]})}
              onDelete={id=>deleteItem('plans_daily',id)}/>
          </div>
        )}

        {/* Health */}
        {tab==='health'&&(
          <div style={{display:'flex',flexDirection:'column',gap:18}}>
            <div className="card">
              <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:18}}>
                <span className="section-title">健康數據趨勢</span>
                <button className="btn-blue" onClick={()=>openModal({type:'add',title:'記錄今日健康數據',col:'health_logs',fields:[{name:'weight',label:'體重 (kg)',type:'number'},{name:'fat',label:'體脂 (%)',type:'number'},{name:'muscle',label:'肌肉量 (kg)',type:'number'}]})}>
                  <Ico name="Plus"/>
                </button>
              </div>
              <HealthChart data={healthLogs}/>
              <div style={{marginTop:18}}>
                <p className="label-xs" style={{marginBottom:10}}>歷史記錄</p>
                {healthLogs.length===0&&<p className="empty-msg">尚無記錄</p>}
                {[...healthLogs].reverse().slice(0,10).map(l=>(
                  <div key={l.id} style={{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'10px 14px',background:'rgba(30,41,59,0.2)',borderRadius:12,marginBottom:7,border:'1px solid #1e293b'}}>
                    <span style={{fontSize:10,color:'#64748b'}}>{new Date(l.createdAt).toLocaleDateString('zh-TW')}</span>
                    <div style={{display:'flex',gap:10}}>
                      {l.weight&&<span style={{fontSize:11,color:'#3b82f6',fontWeight:900}}>體重 {l.weight}kg</span>}
                      {l.fat&&<span style={{fontSize:11,color:'#ef4444',fontWeight:900}}>體脂 {l.fat}%</span>}
                      {l.muscle&&<span style={{fontSize:11,color:'#10b981',fontWeight:900}}>肌肉 {l.muscle}kg</span>}
                    </div>
                    <button className="btn-del" onClick={()=>deleteItem('health_logs',l.id)}><Ico name="Trash" size={14}/></button>
                  </div>
                ))}
              </div>
            </div>
          </div>
        )}

        {/* Assets */}
        {tab==='assets'&&(
          <div style={{display:'flex',flexDirection:'column',gap:18}}>
            <div className="ai-panel-green">
              <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:10}}>
                <span style={{fontSize:11,fontWeight:900,color:'#34d399',textTransform:'uppercase',letterSpacing:'0.1em',display:'flex',alignItems:'center',gap:6}}>
                  <Ico name="Info" size={12}/> AI 資產配置建議
                </span>
                <button className="btn-ghost-green" onClick={getAssetAI} disabled={aiLoading}>{aiLoading?'分析中...':'開始分析'}</button>
              </div>
              <p style={{fontSize:12,color:'#94a3b8',lineHeight:1.6,fontStyle:'italic'}}>
                {assetAdvice||'點擊「開始分析」，AI 將根據您的資產配置提供優化建議。'}
              </p>
            </div>
            <div className="grid-asset">
              <div className="total-card" style={{borderRadius:26}}>
                <p className="label-xs">總資產市值</p>
                <div style={{fontSize:28,fontWeight:900,color:'white',fontStyle:'italic',margin:'8px 0 20px'}}>${total.toLocaleString()}</div>
                <PieChart data={categorized}/>
              </div>
              <div className="card">
                <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:18}}>
                  <span className="section-title">資產明細</span>
                  <button className="btn-blue" onClick={()=>openModal({type:'add',title:'新增資產',col:'assets',fields:[{name:'name',label:'名稱',type:'text'},{name:'amount',label:'市值金額',type:'number'},{name:'category',label:'分類（台股/美股/現金/黃金/借款）',type:'text'}]})}>
                    <Ico name="Plus"/>
                  </button>
                </div>
                {assets.map(a=>(
                  <div key={a.id} className="asset-item">
                    <div style={{flex:1,minWidth:0,paddingRight:10}}>
                      <div style={{fontSize:12,fontWeight:900,color:'#e2e8f0',overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'}}>{a.name}</div>
                      <div style={{display:'flex',gap:8,marginTop:3,alignItems:'center'}}>
                        <span style={{fontSize:9,color:'#64748b',fontWeight:900,textTransform:'uppercase'}}>{a.category}</span>
                        <span style={{fontSize:13,fontWeight:900,color:'#60a5fa',fontStyle:'italic'}}>${Number(a.amount).toLocaleString()}</span>
                      </div>
                    </div>
                    <div style={{display:'flex',gap:2,flexShrink:0}}>
                      <button className="btn-edit" onClick={()=>openModal({type:'edit',title:'編輯資產',col:'assets',id:a.id,fields:[{name:'name',label:'名稱',type:'text'},{name:'amount',label:'市值金額',type:'number'},{name:'category',label:'分類',type:'text'}],initialData:a})}><Ico name="Edit"/></button>
                      <button className="btn-del" onClick={()=>deleteItem('assets',a.id)}><Ico name="Trash"/></button>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        )}

        {/* Notes */}
        {tab==='notes'&&(
          <div className="grid-2">
            {[{key:'life',label:'人生成長'},{key:'book',label:'書籍重點'},{key:'trading',label:'台指交易'},{key:'web',label:'網路心得'}].map(({key,label})=>(
              <div key={key} className="card">
                <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:14}}>
                  <span className="label-xs">{label}</span>
                  <button style={{background:'none',border:'none',color:'#3b82f6',cursor:'pointer',display:'flex'}} onClick={()=>openModal({type:'add',title:`新增${label}`,col:`notes_${key}`,fields:[{name:'title',label:'標題',type:'text'},{name:'content',label:'內容',type:'textarea'}]})}>
                    <Ico name="Plus"/>
                  </button>
                </div>
                {notes[key]?.length===0&&<p className="empty-msg">尚無筆記</p>}
                {notes[key]?.map(n=>(
                  <div key={n.id} className="note-card">
                    <button className="note-header" onClick={()=>setExpandedNote(expandedNote===n.id?null:n.id)}>
                      <span style={{overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap',flex:1,paddingRight:10}}>{n.title}</span>
                      <span style={{color:expandedNote===n.id?'#3b82f6':'#475569',flexShrink:0}}>
                        <Ico name={expandedNote===n.id?'ChevronUp':'ChevronDown'} size={14}/>
                      </span>
                    </button>
                    {expandedNote===n.id&&(
                      <div className="note-body">
                        <p style={{whiteSpace:'pre-wrap',marginBottom:12}}>{n.content}</p>
                        <div style={{display:'flex',justifyContent:'flex-end',gap:12}}>
                          <button className="btn-text btn-text-blue" onClick={()=>openModal({type:'edit',title:'編輯筆記',col:`notes_${key}`,id:n.id,fields:[{name:'title',label:'標題',type:'text'},{name:'content',label:'內容',type:'textarea'}],initialData:n})}>編輯</button>
                          <button className="btn-text btn-text-red" onClick={()=>deleteItem(`notes_${key}`,n.id)}>刪除</button>
                        </div>
                      </div>
                    )}
                  </div>
                ))}
              </div>
            ))}
          </div>
        )}

        {/* Travel */}
        {tab==='travel'&&(
          <div className="card">
            <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:22}}>
              <span className="section-title">旅遊願望與行程</span>
              <button className="btn-green" onClick={()=>openModal({type:'add',title:'新增旅遊行程',col:'travel',fields:[{name:'destination',label:'目的地',type:'text'},{name:'start',label:'開始日期',type:'date'},{name:'end',label:'結束日期',type:'date'}]})}>
                <Ico name="Plus"/>
              </button>
            </div>
            {travel.length===0&&<p className="empty-msg">尚無行程，點擊 + 新增</p>}
            <div className="grid-2">
              {travel.map(t=>(
                <div key={t.id} className="travel-card">
                  <div style={{display:'flex',alignItems:'center',gap:14}}>
                    <div className="travel-icon"><Ico name="MapPin" size={20}/></div>
                    <div>
                      <p style={{fontSize:13,fontWeight:900,fontStyle:'italic',color:'white'}}>{t.destination}</p>
                      <p style={{fontSize:10,color:'#64748b',fontWeight:700,marginTop:3}}>{t.start} ～ {t.end}</p>
                    </div>
                  </div>
                  <button className="btn-del" onClick={()=>deleteItem('travel',t.id)}><Ico name="Trash" size={16}/></button>
                </div>
              ))}
            </div>
          </div>
        )}
      </main>

      <Modal modal={modal} onClose={()=>setModal({show:false})} onSubmit={handleSubmit}/>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<App/>);
</script>

</body>
</html>
