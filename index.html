<!DOCTYPE html>

<html lang="zh-TW">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>人生管理</title>
<style>
*{box-sizing:border-box;margin:0;padding:0;}
body{background:#020617;color:#e2e8f0;font-family:-apple-system,sans-serif;padding:20px;}
#ver{position:fixed;top:0;right:0;background:red;color:white;font-size:12px;padding:4px 8px;z-index:9999;}
#out{margin-top:20px;font-size:14px;color:#94a3b8;line-height:1.8;}
button{padding:12px 24px;border:none;border-radius:10px;font-size:15px;cursor:pointer;margin:8px 4px;-webkit-tap-highlight-color:transparent;}
.bn{background:#2563eb;color:white;}
.bg{background:#059669;color:white;}
.page{display:none;padding:16px;background:#0f172a;border:1px solid #1e293b;border-radius:12px;margin-top:16px;}
.page.on{display:block;}
</style>
</head>
<body>
<div id="ver">v11-MIN</div>
<h2 style="color:white;margin-bottom:16px;">人生管理</h2>
<div id="out">載入中...</div>

<div>
<button class="bn" data-tab="dash">總覽</button>
<button class="bn" data-tab="plans">計畫</button>
<button class="bn" data-tab="health">健康</button>
</div>

<div id="pg-dash" class="page on">總覽頁面 - 點其他按鈕切換</div>
<div id="pg-plans" class="page">計畫頁面</div>
<div id="pg-health" class="page">健康頁面</div>

<button class="bg" id="addBtn">新增測試資料</button>

<div id="list"></div>

<script>
document.getElementById('out').textContent = 'JS OK - ' + new Date().toLocaleTimeString();

var data = [];

try {
  var saved = localStorage.getItem('v11test');
  if (saved) { data = JSON.parse(saved); }
} catch(e) {}

function render() {
  var el = document.getElementById('list');
  if (!data.length) { el.innerHTML = '<p style="color:#64748b;margin-top:8px;">尚無資料</p>'; return; }
  var h = '';
  for (var i = 0; i < data.length; i++) {
    h += '<div style="padding:10px;background:#0f172a;border:1px solid #1e293b;border-radius:8px;margin-top:8px;color:#e2e8f0;">' + data[i] + '</div>';
  }
  el.innerHTML = h;
}

document.getElementById('addBtn').addEventListener('click', function() {
  data.push('項目 ' + (data.length + 1) + ' - ' + new Date().toLocaleTimeString());
  try { localStorage.setItem('v11test', JSON.stringify(data)); } catch(e) {}
  render();
  document.getElementById('out').textContent = '新增成功！共 ' + data.length + ' 筆';
});

document.addEventListener('click', function(e) {
  var t = e.target;
  while (t && t !== document) {
    var tab = t.getAttribute('data-tab');
    if (tab) {
      var pages = ['dash','plans','health'];
      for (var i = 0; i < pages.length; i++) {
        var pg = document.getElementById('pg-' + pages[i]);
        if (pg) { pg.className = (pages[i] === tab) ? 'page on' : 'page'; }
      }
      document.getElementById('out').textContent = '切換到: ' + tab;
      return;
    }
    t = t.parentElement;
  }
});

render();
document.getElementById('out').textContent = 'JS 完全正常！請點按鈕測試。';
</script>

</body>
</html>
